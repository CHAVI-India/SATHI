{% comment %}
PlotContainer Widget
Wrapper for all Plotly.js plots with consistent styling
Parameters:
- plot_id: Unique ID for the plot
- title: Plot title (optional)
- height: Plot height (default: 300px)
- class: Additional CSS classes
{% endcomment %}

<div class="plot-container {{ class|default:'' }}">
    {% if title %}
        <h4 class="text-sm font-medium text-gray-700 mb-2">{{ title }}</h4>
    {% endif %}
    
    <div 
        id="{{ plot_id }}" 
        class="plotly-plot"
        style="height: {{ height|default:'300px' }}; width: 100%;"
        data-plot-config='{
            "displayModeBar": true,
            "modeBarButtonsToRemove": ["pan2d", "select2d", "lasso2d", "autoScale2d"],
            "displaylogo": false,
            "responsive": true,
            "toImageButtonOptions": {
                "format": "png",
                "filename": "patient_results_plot",
                "height": 500,
                "width": 700,
                "scale": 1
            }
        }'
        data-plot-layout='{
            "paper_bgcolor": "#ffffff",
            "plot_bgcolor": "#ffffff",
            "font": {"family": "Inter, system-ui, sans-serif", "size": 12},
            "margin": {"l": 50, "r": 30, "t": 30, "b": 50},
            "xaxis": {
                "gridcolor": "#e5e7eb",
                "gridwidth": 1,
                "showgrid": true,
                "zeroline": false
            },
            "yaxis": {
                "gridcolor": "#e5e7eb", 
                "gridwidth": 1,
                "showgrid": true,
                "zeroline": false
            },
            "hovermode": "x unified",
            "showlegend": true,
            "legend": {
                "orientation": "h",
                "yanchor": "bottom",
                "y": 1.02,
                "xanchor": "right",
                "x": 1
            }
        }'
    >
        <!-- Plot will be rendered here by Plotly.js -->
        <div class="flex items-center justify-center h-full text-gray-400">
            <div class="text-center">
                <svg class="w-8 h-8 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
                <p class="text-sm">Loading plot...</p>
            </div>
        </div>
    </div>
</div> 