{% load i18n %}

<div class="bg-white shadow-sm rounded-lg border border-gray-200 p-4">
    <!-- Patient Basic Info -->
    <div class="mb-4">
        <h3 class="text-lg font-medium text-gray-900">{{ patient.name }}</h3>
        <p class="text-sm text-gray-600">ID: {{ patient.patient_id }}</p>
    </div>

    <!-- Diagnoses -->
    <div class="mb-4">
        <h4 class="text-sm font-medium text-gray-700 mb-2">{% translate "Diagnoses" %}</h4>
        {% if patient.diagnosis_set.all %}
            <div class="space-y-2">
                {% for diagnosis in patient.diagnosis_set.all %}
                <div class="flex items-start">
                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                        {{ diagnosis.diagnosis }}
                    </span>
                    <span class="ml-2 text-xs text-gray-500">
                        {{ diagnosis.created_date|date:"d M Y" }}
                    </span>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-sm text-gray-500 italic">{% translate "No diagnoses recorded" %}</p>
        {% endif %}
    </div>

    <!-- Treatments -->
    <div>
        <h4 class="text-sm font-medium text-gray-700 mb-2">{% translate "Treatments" %}</h4>
        {% if patient.diagnosis_set.all %}
            <div class="space-y-2">
                {% for diagnosis in patient.diagnosis_set.all %}
                    {% for treatment in diagnosis.treatment_set.all %}
                        {% for treatment_type in treatment.treatment_type.all %}
                        <div class="flex items-start">
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                {{ treatment_type.treatment_type }}
                            </span>
                            <span class="ml-2 text-xs text-gray-500">
                                {{ treatment.created_date|date:"d M Y" }}
                            </span>
                        </div>
                        {% endfor %}
                    {% endfor %}
                {% endfor %}
            </div>
        {% else %}
            <p class="text-sm text-gray-500 italic">{% translate "No treatments recorded" %}</p>
        {% endif %}
    </div>
</div> 