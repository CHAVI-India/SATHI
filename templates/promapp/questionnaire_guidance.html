{% extends 'base.html' %}
{% load cotton %}
{% load i18n %}

{% block title %}{% trans "Questionnaire Guidance" %}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-6xl">
    
    <!-- Page Header -->
    <div class="mb-8 text-center">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">{% trans "Questionnaire Guidance" %}</h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            {% trans "A guide to understanding the key concepts and components used in Patient Reported Outcome Measures (PROMs) questionnaires." %}
        </p>
    </div>

    <!-- Navigation Cards Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
        
        <!-- ConstructScale Card -->
        <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200">
            <h3 class="text-xl font-semibold text-gray-900 mb-3">Construct Scale</h3>
            <p class="text-gray-600 mb-4">Define constructs which measure latent traits from questionnaires</p>
            <c-action_buttons action="view" href="{% url 'construct_scale_list' %}">
                {% trans "View Construct Scales" %}
            </c-action_buttons>
        </div>

        <!-- CompositeConstructScore Card -->
        <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200">
            <h3 class="text-xl font-semibold text-gray-900 mb-3">Composite Construct Scores</h3>
            <p class="text-gray-600 mb-4">Combine multiple constructs into a single score</p>
            <c-action_buttons action="view" href="{% url 'composite_construct_scale_scoring_list' %}">
                {% trans "View Composite Scores" %}
            </c-action_buttons>
        </div>

        <!-- Item Card -->
        <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200">
            <h3 class="text-xl font-semibold text-gray-900 mb-3">Item</h3>
            <p class="text-gray-600 mb-4">Individual questions within questionnaires. Various types of responses are supported like Text, Numeric, Likert, Range and Media</p>
            <c-action_buttons action="view" href="{% url 'item_list' %}">
                {% trans "View Items" %}
            </c-action_buttons>
        </div>

        <!-- LikertScale Card -->
        <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200">
            <h3 class="text-xl font-semibold text-gray-900 mb-3">Likert Scale</h3>
            <p class="text-gray-600 mb-4">Response scales for answers which are ordinal (have ordered categories).</p>
            <c-action_buttons action="view" href="{% url 'likert_scale_list' %}">
                {% trans "View Likert Scales" %}
            </c-action_buttons>
        </div>

        <!-- RangeScale Card -->
        <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200">
            <h3 class="text-xl font-semibold text-gray-900 mb-3">Range Scale</h3>
            <p class="text-gray-600 mb-4">Numeric ranges for numeric responses. These are used for responses which are continuous (have a range of values).</p>
            <c-action_buttons action="view" href="{% url 'range_scale_list' %}">
                {% trans "View Range Scales" %}
            </c-action_buttons>
        </div>

        <!-- Questionnaire Card -->
        <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200">
            <h3 class="text-xl font-semibold text-gray-900 mb-3">Questionnaire</h3>
            <p class="text-gray-600 mb-4">Collection of items (questions) which can be shown to a patient.</p>
            <c-action_buttons action="view" href="{% url 'questionnaire_list' %}">
                {% trans "View Questionnaires" %}
            </c-action_buttons>
        </div>

    </div>

    <!-- Detailed Sections -->
    <div class="space-y-12">
        
        <!-- ConstructScale Section -->
        <div class="bg-white rounded-lg shadow-md p-8">
            <div class="border-b border-gray-200 pb-4 mb-6">
                <h2 class="text-3xl font-bold text-gray-900">Construct Scale</h2>
                <p class="text-lg text-gray-600 mt-2">Understanding Latent Traits</p>
            </div>
            
            <div class="prose max-w-none text-gray-700">
                <p class="text-lg leading-relaxed mb-4">
                    {% trans "A Construct Scale represents a validated measurement of a latent trait. This is usually defined at the time of the development of the PROM instrument. Each construct scale is made up of a single or multiple items. We can specify the direction of the scale (e.g. higher is better or lower is better) to indicate the direction in which the scores should be interpreted." %}
                </p>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Key Features:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>{% trans "Specify the direction of the scale (e.g. higher is better or lower is better)" %}</li>
                    <li>{% trans "Define the threshold score - that is the score value above or below which the score is considered to be clinically significant." %}</li>
                    <li>{% trans "Define the minimum clinical important difference. This value represents the minimum difference between two scores for the same individual which can be considered as clinically important." %}</li>
                    <li>{% trans "Define the normative score (mean) and its standard deviation. This is the score value that can be expected for the Construct in a normal healthy population.." %}</li>
                    <li>{% trans "Define equations to calculate the scores from the responses provided for the items." %}</li>
                </ul>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Examples:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>{% trans "Physical Function (from EORTC QLQ-C30)" %}</li>
                    <li>{% trans "Pain Intensity (from BPI)" %}</li>
                    <li>{% trans "Depression Severity (from PHQ-9)" %}</li>
                    <li>{% trans "FACT Physical Well Being score (from FACT-B)" %}</li>
                </ul>
            </div>
            
            <div class="mt-8 flex flex-wrap gap-4">
                <c-action_buttons action="view" href="{% url 'construct_scale_list' %}">
                    {% trans "Manage Construct Scales" %}
                </c-action_buttons>
                <c-create_button href="{% url 'create_construct_scale' %}">
                    {% trans "Create New Construct Scale" %}
                </c-create_button>
            </div>
        </div>

        <!-- CompositeConstructScore Section -->
        <div class="bg-white rounded-lg shadow-md p-8">
            <div class="border-b border-gray-200 pb-4 mb-6">
                <h2 class="text-3xl font-bold text-gray-900">Composite Construct Score</h2>
                <p class="text-lg text-gray-600 mt-2">Combining Multiple Constructs</p>
            </div>
            
            <div class="prose max-w-none text-gray-700">
                <p class="text-lg leading-relaxed mb-4">
                    {% trans "A Composite Construct Score combines multiple individual construct scales into a higher-level composite measure. These scores are typically used to represent a change in overall health or well-being. Sometimes these composite scores are better used for defining change with respect to population norms or for comparing between groups. A good examples if the FACT TOI index which has been primarily designed to provide a single summary measure for sample size calculations for clinical trials." %}
                </p>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Key Features:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>{% trans "Specify two or more construct scale scores to be used in the calcualtion of the composite score." %}</li>
                    <li>{% trans "Supports different aggregation methods (average, weighted sum)" %}</li>
                    <li>{% trans "These composite scores will be automatically calculated for each patient when they complete the questionnaire." %}</li>
                </ul>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Example:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>{% trans "FACT TOI Index (combining Physical, Social, Emotional well being and the BCS subscale scores from the FACT -B questionnaire.)" %}</li>
                </ul>
            </div>
            
            <div class="mt-8">
                <c-action_buttons action="view" href="{% url 'composite_construct_scale_scoring_list' %}">
                    {% trans "Manage Composite Scores" %}
                </c-action_buttons>
                <c-action_buttons action="create" href="{% url 'composite_construct_scale_scoring_create' %}">
                    {% trans "Create New Composite Score" %}
                </c-action_buttons>     
            </div>
        </div>

        <!-- Item Section -->
        <div class="bg-white rounded-lg shadow-md p-8">
            <div class="border-b border-gray-200 pb-4 mb-6">
                <h2 class="text-3xl font-bold text-gray-900">Item</h2>
                <p class="text-lg text-gray-600 mt-2">Individual Question for Questionnaires</p>
            </div>
            
            <div class="prose max-w-none text-gray-700">
                <p class="text-lg leading-relaxed mb-4">
                    {% trans "An Item represents a single question or statement within a questionnaire. Items are the building blocks of questionnaires and are linked to specific construct scales to enable meaningful scoring and interpretation. An item bank can be generated which can be used for multiple questionnaires." %}
                </p>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Key Features:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>{% trans "Supports different response types (Likert, Range, Text, Numeric and Media)" %}</li>
                    <li>{% trans "You can specify the direction of the scale (e.g. higher is better or lower is better) to indicate the direction in which the scores should be interpreted." %}</li>
                    <li>{% trans "You can specify the threshold score - that is the score value above or below which the score is considered to be clinically significant." %}</li>
                    <li>{% trans "You can specify the minimum clinical important difference. This value represents the minimum difference between two scores for the same individual which can be considered as clinically important." %}</li>
                    <li>{% trans "You can specify the normative score (mean) and its standard deviation. This is the score value that can be expected for the Item in a normal healthy population.." %}</li>
                    <li>{% trans "You can add translations for the text of the items in multiple languages." %}</li>
                    <li>{% trans "You can specify if the item needs to be answered for the construct score to be calculated." %}</li>
                </ul>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Response Types:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li><strong>{% trans "Likert:" %}</strong> {% trans "Structured scales (e.g., 1-5 agreement scale)" %}</li>
                    <li><strong>{% trans "Range:" %}</strong> {% trans "Numeric ranges (e.g., 0-10 pain scale)" %}</li>
                    <li><strong>{% trans "Text:" %}</strong> {% trans "Free-form text responses for qualitative data" %}</li>
                    <li><strong>{% trans "Numeric:" %}</strong> {% trans "Numeric values for quantitative measurements" %}</li>
                    <li><strong>{% trans "Media:" %}</strong> {% trans "Videos & Audio recordings" %}</li>
                </ul>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Examples:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>{% trans "\"How would you rate your pain right now?\" (Range: 0-10)" %}</li>
                    <li>{% trans "\"I feel sad or depressed\" (Likert: Never to Always)" %}</li>
                    <li>{% trans "\"Describe your pain\" (Text)" %}</li>
                    <li>{% trans "\"How many days have you been in pain?\" (Numeric)" %}</li>
                </ul>
            </div>
            
            <div class="mt-8">
                <c-action_buttons action="view" href="{% url 'item_list' %}">
                    {% trans "Manage Items" %}
                </c-action_buttons>
                <c-action_buttons action="create" href="{% url 'item_create' %}">
                    {% trans "Create New Item" %}
                </c-action_buttons>
            </div>
        </div>

        <!-- LikertScale Section -->
        <div class="bg-white rounded-lg shadow-md p-8">
            <div class="border-b border-gray-200 pb-4 mb-6">
                <h3 class="text-3xl font-bold text-gray-900">Likert Scale</h3>
                <p class="text-lg text-gray-600 mt-2">Structured Response Options</p>
            </div>
            
            <div class="prose max-w-none text-gray-700">
                <p class="text-lg leading-relaxed mb-4">
                    {% trans "A Likert Scale defines a set of structured response options for items that use ordinal measurement. A likert Scale can have multiple response options. Each of these options can have an associated numeric value, a text label, an optional emoji and an optional media item. Specifying the Likert scale in this fashion allows the same scale to be used with multiple items and reduces the burden of translations. It is important to note that the option value is used for all score calculations. " %}
                </p>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Key Features:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>{% trans "Defines response labels and their corresponding numeric values" %}</li>
                    <li>{% trans "You can add as many response options as you need." %}</li>
                    <li>{% trans "Translations can be added for the option text as well as the option media allowing the users to see the translated option and media when answering the item." %}</li>                    
                </ul>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Common Scale Types:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li><strong>{% trans "Severity:" %}</strong> {% trans "None, Mild, Moderate, Severe" %}</li>
                    <li><strong>{% trans "Frequency:" %}</strong> {% trans "Never, Rarely, Sometimes, Often, Always" %}</li>
                </ul>
                
            </div>
            
            <div class="mt-8">
                <c-action_buttons action="view" href="{% url 'likert_scale_list' %}">
                    {% trans "Manage Likert Scales" %}
                </c-action_buttons>
                <c-action_buttons action="create" href="{% url 'create_likert_scale' %}">
                    {% trans "Create New Likert Scale" %}
                </c-action_buttons>
            </div>
        </div>

        <!-- RangeScale Section -->
        <div class="bg-white rounded-lg shadow-md p-8">
            <div class="border-b border-gray-200 pb-4 mb-6">
                <h2 class="text-3xl font-bold text-gray-900">Range Scale</h2>
                <p class="text-lg text-gray-600 mt-2">Continuous Numeric Responses with defined intervals.</p>
            </div>
            
            <div class="prose max-w-none text-gray-700">
                <p class="text-lg leading-relaxed mb-4">
                    {% trans "A Range Scale defines numeric ranges for continuous or quasi-continuous measurements. These scales are ideal for capturing precise measurements where responses can vary along a continuum, such as pain intensity or functional capacity. A range scale has a minimum and maximum value as well as a step size which defines the discrete intervals between two numeric values inside the range. A range scale response is presented as a slide for the patient when the questionnaire is displayed. As this is a numeric response, it can be used for calculations and scoring." %}
                </p>
                
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Common Applications:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li><strong>{% trans "Pain Scales:" %}</strong> {% trans "0 (No Pain) to 10 (Worst Pain Imaginable)" %}</li>
                    <li><strong>{% trans "Functional Capacity:" %}</strong> {% trans "0% to 100% of normal function" %}</li>
                    <li><strong>{% trans "Quality of Life:" %}</strong> {% trans "0 (Worst) to 100 (Best)" %}</li>
                    <li><strong>{% trans "Symptom Severity:" %}</strong> {% trans "1 (Mild) to 7 (Severe)" %}</li>
                </ul>
                
            </div>
            
            <div class="mt-8">
                <c-action_buttons action="view" href="{% url 'range_scale_list' %}">
                    {% trans "Manage Range Scales" %}
                </c-action_buttons>
                <c-action_buttons action="create" href="{% url 'create_range_scale' %}">
                    {% trans "Create New Range Scale" %}
                </c-action_buttons>
            </div>
        </div>

        <!-- Questionnaire Section -->
        <div class="bg-white rounded-lg shadow-md p-8">
            <div class="border-b border-gray-200 pb-4 mb-6">
                <h2 class="text-3xl font-bold text-gray-900">Questionnaire</h2>
                <p class="text-lg text-gray-600 mt-2">A set of questions displayed to the patients.</p>
            </div>
            
            <div class="prose max-w-none text-gray-700">
                <p class="text-lg leading-relaxed mb-4">
                    {% trans "A Questionnaire combines multiple items into a defined order. The order of the items in the questionnaire is important and it can be adjusted. A questionnaire have items from one or more constructs. It is recommended that a questionaire has all items related to a construct inside it." %}
                </p>
                
                <h3 class="text-xl font-semibold text-gray-900 mt-6 mb-3">{% trans "Key Features:" %}</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>{% trans "Flexible ordering of items via drag and drop." %}</li>
                    <li>{% trans "Specify a questionnaire order when the same patient has to answer multiple questionnaires. This allows the patient to clearly see the order in which the questionnaires are to be answered." %}</li>
                    <li>{% trans "Title and description text are tranlatable." %}</li>
                    <li>{% trans "A minimum interval between answering the same questionnaire can be set. We recommend a default value of at least 1 minute so that inadvertent duplicate responses are not created." %}</li>
                    <li>{% trans "Optional redirect to a different questonnaire can be specified. This is useful when a patient has to answer multiple questionnaires in a single session." %}</li>
                    <li>{% trans "You can add rules to the questionnaire such that items are displayed or hidden based on the answers provided for one or more questions before." %}</li>
                </ul>
                
            
            <div class="mt-8">
                <c-action_buttons action="view" href="{% url 'questionnaire_list' %}">
                    {% trans "Manage Questionnaires" %}
                </c-action_buttons>
                <c-action_buttons action="create" href="{% url 'questionnaire_create' %}">
                    {% trans "Create New Questionnaire" %}
                </c-action_buttons>
            </div>
        </div>

    </div>

    <!-- Action Section -->
    <div class="mt-12 bg-blue-50 rounded-lg p-8 text-center">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">{% trans "Ready to Get Started?" %}</h2>
        <p class="text-lg text-gray-600 mb-6">
            {% trans "We recommend that you create the construct scales and items first and then add these to a new questionnaire. If your questionnaire has a Likert or Range scale type of response then these should be created before adding the first item." %}
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <c-action_buttons action="create" href="{% url 'create_construct_scale' %}">
                {% trans "Create New Construct Scale" %}
            </c-action_buttons>
            <c-action_buttons action="create" href="{% url 'create_likert_scale' %}">
                {% trans "Create New Likert Scale" %}
            </c-action_buttons>
            <c-action_buttons action="create" href="{% url 'create_range_scale' %}">
                {% trans "Create New Range Scale" %}
            </c-action_buttons>
            <c-action_buttons action="create" href="{% url 'item_create' %}">
                {% trans "Create New Item" %}
            </c-action_buttons>
            <c-action_buttons action="create" href="{% url 'questionnaire_create' %}">
                {% trans "Create New Questionnaire" %}
            </c-action_buttons>
        </div>
    </div>

</div>
{% endblock %}
